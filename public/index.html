<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Organizer</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="app-title">üìÅ Document Organizer</h1>
            <button class="btn btn-primary" id="uploadBtn">
                <span class="btn-icon">+</span> Upload Document
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Search and Filter Bar -->
            <div class="search-filter-bar">
                <div class="search-box">
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="Search documents..."
                        class="search-input"
                    >
                    <button id="clearSearchBtn" class="btn-clear" style="display: none;">√ó</button>
                </div>
            </div>

            <!-- Category Pills -->
            <div class="category-pills" id="categoryPills">
                <button class="pill active" data-category="all">All</button>
                <button class="pill" data-category="personal-ids">Personal IDs</button>
                <button class="pill" data-category="educational-docs">Educational</button>
                <button class="pill" data-category="work-experience">Work</button>
                <button class="pill" data-category="resumes">Resumes</button>
                <button class="pill" data-category="invoices">Invoices</button>
                <button class="pill" data-category="insurance">Insurance</button>
                <button class="pill" data-category="bank-statements">Bank</button>
                <button class="pill" data-category="others">Others</button>
            </div>

            <!-- Statistics -->
            <div class="stats-container" id="statsContainer">
                <div class="stat-card">
                    <div class="stat-value" id="totalDocs">0</div>
                    <div class="stat-label">Total Documents</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalSize">0 MB</div>
                    <div class="stat-label">Total Size</div>
                </div>
            </div>

            <!-- Loading State -->
            <div class="loading" id="loadingState" style="display: none;">
                <div class="spinner"></div>
                <p>Loading documents...</p>
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">üìÑ</div>
                <h2>No documents found</h2>
                <p>Upload your first document to get started</p>
                <button class="btn btn-primary" onclick="document.getElementById('uploadBtn').click()">
                    Upload Document
                </button>
            </div>

            <!-- Documents Grid -->
            <div class="documents-grid" id="documentsGrid"></div>
        </div>
    </main>

    <!-- Upload Modal -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upload Document</h2>
                <button class="modal-close" id="closeUploadModal">&times;</button>
            </div>
            <form id="uploadForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="fileInput">Select File *</label>
                    <input
                        type="file"
                        id="fileInput"
                        name="file"
                        accept=".pdf,.jpg,.jpeg,.png"
                        required
                    >
                    <small class="help-text">PDF, JPG, or PNG (max 10MB)</small>
                </div>

                <div class="form-group">
                    <label for="categorySelect">Category *</label>
                    <select id="categorySelect" name="category" required>
                        <option value="">Select a category</option>
                        <option value="personal-ids">Personal IDs</option>
                        <option value="educational-docs">Educational Docs</option>
                        <option value="work-experience">Work Experience Letters</option>
                        <option value="resumes">Resumes</option>
                        <option value="invoices">Online Purchase Invoices</option>
                        <option value="insurance">Insurance Docs</option>
                        <option value="bank-statements">Bank Statements</option>
                        <option value="others">Others</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="descriptionInput">Description</label>
                    <textarea
                        id="descriptionInput"
                        name="description"
                        rows="3"
                        placeholder="Add a description (optional)"
                        maxlength="1000"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="documentNumberInput">Document Number</label>
                    <input
                        type="text"
                        id="documentNumberInput"
                        name="document_number"
                        placeholder="e.g., Invoice #12345 (optional)"
                        maxlength="100"
                    >
                </div>

                <div class="upload-progress" id="uploadProgress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p class="progress-text" id="progressText">Uploading...</p>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelUploadBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submitUploadBtn">Upload</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Document Viewer Modal -->
    <div class="modal" id="viewerModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="viewerTitle">Document</h2>
                <button class="modal-close" id="closeViewerModal">&times;</button>
            </div>
            <div class="viewer-container">
                <div class="document-info" id="documentInfo"></div>
                <div class="document-display" id="documentDisplay"></div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="downloadBtn">Download</button>
                <button class="btn btn-secondary" id="editBtn">Edit</button>
                <button class="btn btn-danger" id="deleteBtn">Delete</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Document</h2>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <form id="editForm">
                <input type="hidden" id="editDocumentId">

                <div class="form-group">
                    <label for="editCategorySelect">Category</label>
                    <select id="editCategorySelect" name="category">
                        <option value="personal-ids">Personal IDs</option>
                        <option value="educational-docs">Educational Docs</option>
                        <option value="work-experience">Work Experience Letters</option>
                        <option value="resumes">Resumes</option>
                        <option value="invoices">Online Purchase Invoices</option>
                        <option value="insurance">Insurance Docs</option>
                        <option value="bank-statements">Bank Statements</option>
                        <option value="others">Others</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="editDescriptionInput">Description</label>
                    <textarea
                        id="editDescriptionInput"
                        name="description"
                        rows="3"
                        maxlength="1000"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="editDocumentNumberInput">Document Number</label>
                    <input
                        type="text"
                        id="editDocumentNumberInput"
                        name="document_number"
                        maxlength="100"
                    >
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="modal-close" id="closeDeleteModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this document? This action cannot be undone.</p>
                <p class="text-muted" id="deleteDocumentName"></p>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelDeleteBtn">Cancel</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Scripts -->
    <script src="/js/app.js"></script>
    <script src="/js/upload.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/viewer.js"></script>
</body>
</html>
